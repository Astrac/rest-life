"use strict";angular.module("webApp",["ngCookies","ngResource","ngSanitize","ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("webApp").controller("MainCtrl",["$interval","$http","$scope",function(a,b,c){var d={v:30,h:45,cellSize:18,cellMargin:1},e=function(a){return d.cellMargin+a*(d.cellSize+2*d.cellMargin)},f=function(a,b){return{x:a,y:b,posX:e(a),posY:e(b),l:d.cellSize}},g=function(){g=[];for(var a=0;a<d.h;a++)for(var b=0;b<d.v;b++)g.push(f(a,b));return g},h={boardConfig:d,cells:g(),selectedCells:[],"class":function(a){return _.find(h.selectedCells,function(b){return b.x==a.x&&b.y==a.y})?"cell-live":"cell"}};c.toggle=function(a){var b=h.selectedCells.indexOf(a);-1==b?h.selectedCells.push(a):h.selectedCells.splice(b,1)};var i=null;c.startSym=function(){if(console.log(h.selectedCells),null===i){var c=function(a){return _.map(a,function(a){return[a.x,a.y]})},d=function(a){return _.map(a,function(a){return f(a[0],a[1])})},e=[],g=function(){var a=e.length>0?_.last(e):c(h.selectedCells);b({method:"POST",data:{board:a,steps:40},url:"/board"}).success(function(a){e=e.concat(a)})};g(),a(function(){g()},2500),a(function(){if(e.length>0){var a=_.last(e),b=d(a);e=_.without(e,a),console.log(b),h.selectedCells=b}},250)}},c.board=h}]);